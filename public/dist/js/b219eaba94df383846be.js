"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[541],{7399:(t,s,e)=>{e.d(s,{Z:()=>r});var a=e(1519),n=e.n(a)()((function(t){return t[1]}));n.push([t.id,'.wrapper_step[data-v-cc4a585c]{margin-left:30px;margin-right:30px;padding:0}.wrapper_step[data-v-cc4a585c]:first-child{margin-left:0}.wrapper_step[data-v-cc4a585c]:last-child{margin-right:0}.wrapper_step:last-child .some_step[data-v-cc4a585c]:after{content:none}.some_step[data-v-cc4a585c]{background:transparent;border-color:rgb(var(--vs-gray-4))!important;cursor:pointer;height:40px;position:relative;width:40px}.some_step[data-v-cc4a585c]:after{background:rgb(var(--vs-gray-4))!important;content:"";display:block;height:2px;left:40px;position:absolute;top:calc(50% - 2px);width:60px}.some_step.active[data-v-cc4a585c]{background:rgb(var(--vs-primary));border-color:rgb(var(--vs-primary))!important;color:#fff}.some_step.success[data-v-cc4a585c]{background:rgb(var(--vs-success));border-color:rgb(var(--vs-success))!important;color:#fff}',""]);const r=n},1710:(t,s,e)=>{e.d(s,{Z:()=>r});var a=e(1519),n=e.n(a)()((function(t){return t[1]}));n.push([t.id,".slide-fade-enter-active[data-v-32c58e7a]{transition:all .3s ease}.slide-fade-leave-active[data-v-32c58e7a]{transition:all .3s cubic-bezier(1,.5,.8,1)}.slide-fade-enter[data-v-32c58e7a],.slide-fade-leave-to[data-v-32c58e7a]{opacity:0;transform:translateX(10px)}",""]);const r=n},4541:(t,s,e)=>{e.r(s),e.d(s,{default:()=>g});var a=e(7757),n=e.n(a),r=e(538),o=e(9669),i=e.n(o);const c={name:"Stepper",props:{count:{type:Number,required:!1,default:5},bus:{type:r.default,required:!0}},data:function(){return{steps:[],localStep:{}}},mounted:function(){for(var t,s=0;s<this.count;)t="default",0===s&&(t="active",this.localStep={step:s+1,status:"default"}),this.steps.push({status:t,step:s+1}),s++;this.bus.$on("setStatus",this.setStatus)},methods:{setStatus:function(t){var s=this.steps.find((function(s){return s.step===t.step+1}));this.localStep.step===t.step&&(this.localStep.status=t.status),console.log("load new Status",s),this.setStatusStep(s)},setStatusStep:function(t){var s=this;if(console.log("parent step","default"===t.status&&"default"===this.localStep.status),"default"===t.status&&t.step-this.localStep.step>=1&&"default"===t.status&&"default"===this.localStep.status)return console.log("set step if False"),!1;var e=this.steps.find((function(t){return t.step===s.localStep.step}));e.status=this.localStep.status,console.log("is this step",e),this.localStep={step:t.step,status:t.status},t.status="active",console.log("new step",t),this.bus.$emit("changeStep",t.step)}}};var l=e(3379),u=e.n(l),p=e(7399),d={insert:"head",singleton:!1};u()(p.Z,d);p.Z.locals;var f=e(1900);function v(t,s,e,a,n,r,o){try{var i=t[r](o),c=i.value}catch(t){return void e(t)}i.done?s(c):Promise.resolve(c).then(a,n)}const m={name:"create",data:function(){return{value1:"",stepForm:1,bus:new r.default,companies:[],form:{company:"",user:{name:"",nationality:""}}}},components:{Stepper:(0,f.Z)(c,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row justify-content-center w-100"},t._l(t.steps,(function(s){return e("div",{staticClass:"d-flex w-auto wrapper_step"},[e("div",{staticClass:"border some_step d-flex justify-content-center align-items-center rounded-circle",class:s.status,on:{click:function(e){return t.setStatusStep(s)}}},["success"===s.status?e("i",{staticClass:"bx bx-check",attrs:{"aria-hidden":"true"}}):e("span",{staticClass:"d-flex"},[t._v(t._s(s.step))])])])})),0)}),[],!1,null,"cc4a585c",null).exports},mounted:function(){var t,s=this;return(t=n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.bus.$on("changeStep",s.changeStep),t.next=3,i().get("/api/companies").then((function(t){s.companies=t.data.payload.companies})).catch((function(t){s.$vs.notification({title:s.$t("notification.get.danger.title"),text:s.$t("notification.get.danger.text")})}));case 3:return t.next=5,s.$root.$loading.finish();case 5:case"end":return t.stop()}}),t)})),function(){var s=this,e=arguments;return new Promise((function(a,n){var r=t.apply(s,e);function o(t){v(r,a,n,o,i,"next",t)}function i(t){v(r,a,n,o,i,"throw",t)}o(void 0)}))})()},computed:{step:{get:function(){return this.stepForm},set:function(t){console.log("Пришло на set",t),t<0||t>5?this.$vs.notification({duration:2e3,sticky:!0,position:"top-right",color:"danger",title:"Ошибка!",text:"Вы ушли за границу данных"}):(this.stepForm=t,console.log("Сохранило в set",t))}},companyError:function(){return(""===this.form.company||null===this.form.company)&&this.$t("invoice.errors.company")},userNameError:function(){return(""===this.form.user.name||null===this.form.user.name)&&this.$t("invoice.errors.user.name")},userNationalityError:function(){return(""===this.form.user.nationality||null===this.form.user.nationality)&&this.$t("invoice.errors.user.nationality")}},methods:{changeStep:function(t){console.log("changeStep",t),this.step=t},notifyError:function(){this.$vs.notification({duration:2e3,sticky:!0,position:"top-right",color:"danger",title:this.$t("invoice.errors.validateInputs.title"),text:this.$t("invoice.errors.validateInputs.text")})},next:function(){if(1===this.step){if(this.companyError)return this.notifyError(),!1;this.bus.$emit("setStatus",{step:this.step,status:"success"})}else if(2===this.step){if(this.userNationalityError||this.userNameError)return this.notifyError(),!1;this.bus.$emit("setStatus",{step:this.step,status:"success"})}}}};var h=e(1710),y={insert:"head",singleton:!1};u()(h.Z,y);h.Z.locals;const g=(0,f.Z)(m,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{appear:"",mode:"out-in",name:"fade"}},[t.$root.$loading.show?e("Loader",{key:"1"}):e("div",{key:"2",attrs:{id:"groupCollapse"}},[e("div",{staticClass:"row justify-content-center mb-5"},[e("div",{staticClass:"col-12 col-mg-8 col-lg justify-content-center"},[e("Stepper",{attrs:{bus:t.bus,count:5}})],1)]),t._v(" "),e("div",{staticClass:"row mx-0"},[e("div",{staticClass:"col-12"},[e("transition",{attrs:{name:"slide-fade",appear:"",mode:"out-in"}},[1===t.stepForm?e("div",{key:"1",staticClass:"card"},[e("div",{staticClass:"card-title px-3 pb-2 pt-4"},[e("h6",{staticClass:"fw-light text-reset"},[t._v("Шаг 1 из 5 "),e("span",{staticClass:"fw-bolder"},[t._v("Компания")])])]),t._v(" "),e("div",{staticClass:"card-body p-0 pb-3"},[e("div",{staticClass:"mx-3 my-2"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-6 col-lg-4"},[e("vs-select",{staticClass:"mw-100",attrs:{placeholder:t.$t("invoice.inputs.company_name")},scopedSlots:t._u([t.companyError?{key:"message-danger",fn:function(){return[t._v("\n                          "+t._s(t.companyError)+"\n                        ")]},proxy:!0}:null],null,!0),model:{value:t.form.company,callback:function(s){t.$set(t.form,"company",s)},expression:"form.company"}},[t._v(" "),t._l(t.companies,(function(s){return e("vs-option",{key:s.id,attrs:{label:s.name,value:s.id}},[t._v("\n                          "+t._s(s.name)+"\n                        ")])}))],2)],1),t._v(" "),e("div",{staticClass:"col-12 col-md-6 col-lg-4"},[e("vs-select",{staticClass:"mw-100",attrs:{placeholder:t.$t("invoice.inputs.company_ref")},scopedSlots:t._u([t.companyError?{key:"message-danger",fn:function(){return[t._v("\n                        "+t._s(t.companyError)+"\n                      ")]},proxy:!0}:null],null,!0),model:{value:t.form.company,callback:function(s){t.$set(t.form,"company",s)},expression:"form.company"}},[t._v(" "),t._l(t.companies,(function(s){return e("vs-option",{key:s.id,attrs:{label:s.code,value:s.id}},[t._v("\n                        "+t._s(s.code)+"\n                      ")])}))],2)],1)]),t._v(" "),e("div",{staticClass:"row justify-content-end"},[e("div",{staticClass:"col-auto"},[e("vs-button",{attrs:{flat:""},on:{click:t.next},scopedSlots:t._u([!1===t.companyError?{key:"animate",fn:function(){return[e("i",{staticClass:"bx bx-right-arrow-alt fs-2",attrs:{"aria-hidden":"true"}})]},proxy:!0}:{key:"animate",fn:function(){return[e("i",{staticClass:"bx bx-x fs-2",attrs:{"aria-hidden":"true"}})]},proxy:!0}],null,!0)},[t._v("\n                      "+t._s(t.$t("invoice.buttons.next"))+"\n\n                      ")])],1)])])])]):2===t.stepForm?e("div",{key:"2",staticClass:"card"},[e("div",{staticClass:"card-title px-3 pb-2 pt-4"},[e("h6",{staticClass:"fw-light text-reset"},[t._v("Шаг 2 из 5 "),e("span",{staticClass:"fw-bolder"},[t._v("Данные пользователя")])])]),t._v(" "),e("div",{staticClass:"card-body p-0 pb-3"},[e("div",{staticClass:"mx-3 my-2"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-6 col-lg-4"},[e("vs-input",{attrs:{shadow:"",placeholder:t.$t("invoice.inputs.user.name")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("i",{staticClass:"bx bx-user",attrs:{"aria-hidden":"true"}})]},proxy:!0},t.userNameError?{key:"message-danger",fn:function(){return[t._v("\n                        "+t._s(t.userNameError)+"\n                      ")]},proxy:!0}:null],null,!0),model:{value:t.form.user.name,callback:function(s){t.$set(t.form.user,"name",s)},expression:"form.user.name"}})],1),t._v(" "),e("div",{staticClass:"col-12 col-md-6 col-lg-4"},[e("vs-input",{attrs:{shadow:"",placeholder:t.$t("invoice.inputs.user.nationality")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("i",{staticClass:"bx bx-globe",attrs:{"aria-hidden":"true"}})]},proxy:!0},t.userNationalityError?{key:"message-danger",fn:function(){return[t._v("\n                        "+t._s(t.userNationalityError)+"\n                      ")]},proxy:!0}:null],null,!0),model:{value:t.form.user.nationality,callback:function(s){t.$set(t.form.user,"nationality",s)},expression:"form.user.nationality"}})],1)]),t._v(" "),e("div",{staticClass:"row justify-content-end"},[e("div",{staticClass:"col-auto"},[e("vs-button",{attrs:{flat:""},on:{click:t.next},scopedSlots:t._u([!1===t.companyError?{key:"animate",fn:function(){return[e("i",{staticClass:"bx bx-right-arrow-alt fs-2",attrs:{"aria-hidden":"true"}})]},proxy:!0}:{key:"animate",fn:function(){return[e("i",{staticClass:"bx bx-x fs-2",attrs:{"aria-hidden":"true"}})]},proxy:!0}],null,!0)},[t._v("\n                      "+t._s(t.$t("invoice.buttons.next"))+"\n\n                      ")])],1)])])])]):t._e()])],1)])])],1)}),[],!1,null,"32c58e7a",null).exports}}]);